<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>THREADS PROGRAMMING - SLOW-MOTION</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="THREADS PROGRAMMING" />
<meta property="og:description" content="In shared memory multiprocessor architecture, threads can be used to implement parallelism. For UNIX systems, a standardized C language threads programming interface has been specified by the IEEE POSIX 1003.1c standard. Implementations that adhere to this standard are referred to as POSIX threads, or Pthreads. This post introduces essentials of the POSIX threads and the programming examples in C/C&#43;&#43;.
POSIX Threads Essentials
      1. PThreads Overview
      2. Thread Management
      3. Mutex Variables
      4. Condition Variables
      5. Monitoring, Debugging and Performance Analysis
POSIX Threads Exercise
      1. Exercise #1
      2. Exercise #2
      3. Exercise #3
      4. Exercise #4" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/threads-programming/" />
<meta property="article:published_time" content="2022-01-01T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-01-01T00:00:00+00:00" />

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo logo--mixed">
		<a class="logo__link" href="/" title="SLOW-MOTION" rel="home">
			<div class="logo__item logo__imagebox">
					<img class="logo__img" src="/img/icons/slow-motion.gif">
				</div><div class="logo__item logo__text">
					<div class="logo__title">SLOW-MOTION</div>
					<div class="logo__tagline">NOT TO BE FAST BUT TO BE</div>
				</div>
		</a>
	</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/about/">
				
				<span class="menu__text">About</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">THREADS PROGRAMMING</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2022-01-01T00:00:00Z">January 01, 2022</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/c&#43;&#43;/" rel="category">C&#43;&#43;</a>
	</span>
</div></div>
		</header>
		<div class="content post__content clearfix">
			<p>In shared memory multiprocessor architecture, threads can be used to implement parallelism. For UNIX systems, a standardized C language threads programming interface has been specified by the IEEE POSIX 1003.1c standard. Implementations that adhere to this standard are referred to as <strong>POSIX threads</strong>, or <strong>Pthreads</strong>. This post introduces essentials of the POSIX threads and the programming examples in C/C++.</p>
<h3 id="posix-threads-essentialsposix-threads-essentials"><a href="#posix-threads-essentials">POSIX Threads Essentials</a></h3>
<h5 id="nbsp-nbsp-nbsp-1-pthreads-overviewpthreads-overview"><a href="#pthreads-overview">      1. PThreads Overview</a></h5>
<h5 id="nbsp-nbsp-nbsp-2-thread-managementexamples"><a href="#examples">      2. Thread Management</a></h5>
<h5 id="nbsp-nbsp-nbsp-3-mutex-variablesexamples"><a href="#examples">      3. Mutex Variables</a></h5>
<h5 id="nbsp-nbsp-nbsp-4-condition-variablesexamples"><a href="#examples">      4. Condition Variables</a></h5>
<h5 id="nbsp-nbsp-nbsp-5-monitoring-debugging-and-performance-analysisexamples"><a href="#examples">      5. Monitoring, Debugging and Performance Analysis</a></h5>
<h3 id="posix-threads-exercisehmm"><a href="#hmm">POSIX Threads Exercise</a></h3>
<h5 id="nbsp-nbsp-nbsp-1-exercise-1examples"><a href="#examples">      1. Exercise #1</a></h5>
<h5 id="nbsp-nbsp-nbsp-2-exercise-2examples"><a href="#examples">      2. Exercise #2</a></h5>
<h5 id="nbsp-nbsp-nbsp-3-exercise-3examples"><a href="#examples">      3. Exercise #3</a></h5>
<h5 id="nbsp-nbsp-nbsp-4-exercise-4examples"><a href="#examples">      4. Exercise #4</a></h5>
<h1 id="posix-threads-essentials"><strong>POSIX Threads Essentials</strong></h1>
<h2 id="pthreads-overview"><strong>PThreads Overview</strong></h2>
<p>A programming language consits of a grammar/syntax and execution model.
<strong>POSIX Threads</strong> (known as <strong>pthreads</strong>) is a parallel execution model specifing the behavior of elements of the language.
Pthreads control multiple different flows of work that overlap in time. Each flow of work is reffered to as a thread, and creation and control over these flows is achieved by making calls to the POSIX Thread API.</p>
<h3 id="1-threads-and-process"><strong>1. Threads and Process</strong></h3>
<p>A <strong>thread</strong> is defined as the smallest independent stream of programmed instructions that can be managed by scheduler, which is typically a part of the operating system. The implementation of threads and processes differs between operating systems, but in most cases a thread is a compnent of process.</p>
<p>A <strong>Process</strong> is created by the operating system. A process consists of below process control infomration, which is used by OS to manage the process. The information is stored in the <strong>Process Control Block (PCB)</strong>.</p>
<table>
<thead>
<tr>
<th>Information</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Process scheduling state</td>
<td>The state of the process in terms of &ldquo;ready&rdquo;, &ldquo;suspended&rdquo;, etc., and other scheduling information as well, such as priority value, the amount of time elapsed since the process gained control of the CPU or since it was suspended. Also, in case of a suspended process, event identification data must be recorded for the event the process is waiting for.</td>
</tr>
<tr>
<td>Process structuring information</td>
<td>the process&rsquo;s children id&rsquo;s, or the id&rsquo;s of other processes related to the current one in some functional way, which may be represented as a queue, a ring or other data structures</td>
</tr>
<tr>
<td>Interprocess communication information</td>
<td>flags, signals and messages associated with the communication among independent processes</td>
</tr>
<tr>
<td>Process Privileges</td>
<td>allowed/disallowed access to system resources</td>
</tr>
<tr>
<td>Process State</td>
<td>new, ready, running, waiting, dead</td>
</tr>
<tr>
<td>Process Number (PID)</td>
<td>unique identification number for each process (also known as Process ID)</td>
</tr>
<tr>
<td>Program Counter (PC)</td>
<td>A pointer to the address of the next instruction to be executed for this process</td>
</tr>
<tr>
<td>CPU Registers</td>
<td>Register set where process needs to be stored for execution for running state</td>
</tr>
<tr>
<td>CPU Scheduling Information</td>
<td>information scheduling CPU time</td>
</tr>
<tr>
<td>Memory Management Information</td>
<td>page table, memory limits, segment table</td>
</tr>
<tr>
<td>Accounting Information</td>
<td>amount of CPU used for process execution, time limits, execution ID etc.</td>
</tr>
<tr>
<td>I/O Status Information</td>
<td>list of I/O devices allocated to the process.</td>
</tr>
</tbody>
</table>
<p>Threads use and exist within these process resources, yet are able to be scheduled by the operating system and run as independent entities largely because they duplicate only the bare essential resources that enable them to exist as executable code.</p>
<p>This independent flow of control is accomplished because a thread maintains its own:</p>
<ul>
<li>Stack pointer</li>
<li>Registers</li>
<li>Scheduling properties (such as policy or priority)</li>
<li>Set of pending and blocked signals</li>
<li>Thread specific data.</li>
</ul>
<p>So, in summary, a thread:</p>
<ul>
<li>Exists within a process and uses the process resources</li>
<li>Has its own independent flow of control as long as its parent process exists and the OS supports it</li>
<li>Duplicates only the essential resources it needs to be independently schedulable</li>
<li>May share the process resources with other threads that act equally independently (and dependently)</li>
<li>Dies if the parent process dies - or something similar</li>
<li>Is “lightweight” because most of the overhead has already been accomplished through the creation of its process.</li>
</ul>
<p>Because threads within the same process share resources:</p>
<ul>
<li>Changes made by one thread to shared system resources (such as closing a file) will be seen by all other threads.</li>
<li>Two pointers having the same value point to the same data.</li>
<li>Reading and writing to the same memory locations is possible, and therefore requires explicit synchronization by the programmer.</li>
</ul>
<h3 id="2-pthreads"><strong>2. PThreads</strong></h3>
<p>Historically, hardware vendors have implemented their own proprietary versions of threads. These implementations differed substantially from each other making it difficult for programmers to develop portable threaded applications.</p>
<p>In order to take full advantage of the capabilities provided by threads, a standardized programming interface was required. For UNIX systems, this interface has been specified by the IEEE POSIX 1003.1c standard (1995). Implementations which adhere to this standard are referred to as POSIX threads, or Pthreads. Most hardware vendors now offer Pthreads in addition to their proprietary API&rsquo;s.</p>
<p>Pthreads are defined as a set of C language programming types and procedure calls, implemented with a <code>pthread.h</code> header/include file and a thread library - though this library may be part of another library, such as <code>libc</code>.</p>
<p>There are several drafts of the POSIX threads standard. It is important to be aware of the draft number of a given implementation, because there are differences between drafts that can cause problems.</p>
<h3 id="3-threaded-program-design"><strong>3. Threaded Program Design</strong></h3>
<p>On modern, multi-cpu machines, pthreads are ideally suited for parallel programming, and whatever applies to parallel programming in general, applies to parallel pthreads programs.</p>
<p>There are many considerations for designing parallel programs, such as:</p>
<ul>
<li>What type of parallel programming model to use?</li>
<li>Problem partitioning</li>
<li>Load balancing</li>
<li>Communications</li>
<li>Data dependencies</li>
<li>Synchronization and race conditions</li>
<li>Memory issues</li>
<li>I/O issues</li>
<li>Program complexity</li>
<li>Programmer effort/costs/time</li>
<li>&hellip;</li>
</ul>
		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/c&#43;&#43;/" rel="tag">C&#43;&#43;</a>
		</li>
		<li class="tags__item">
			<a class="tags__link btn" href="/tags/threads/" rel="tag">Threads</a>
		</li>
	</ul>
</div>
		</footer>
	</article>
</main>

<div class="authorbox clearfix">
	<figure class="authorbox__avatar">
		<img alt="Sungjae Jung avatar" src="/img/avatar.png" class="avatar" height="90" width="90">
	</figure>
	<div class="authorbox__header">
		<span class="authorbox__name">About Sungjae Jung</span>
	</div>
	<div class="authorbox__description">
		Informatik of Informatiklavier
	</div>
</div>



			</div>
			<aside class="sidebar"><div class="widget-search widget">
	<form class="widget-search__form" role="search" method="get" action="https://google.com/search">
		<label>
			<input class="widget-search__field" type="search" placeholder="SEARCH…" value="" name="q" aria-label="SEARCH…">
		</label>
		<input class="widget-search__submit" type="submit" value="Search">
		<input type="hidden" name="sitesearch" value="/" />
	</form>
</div>
<div class="widget-recent widget">
	<h4 class="widget__title">Recent Posts</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/post/threads-programming/">THREADS PROGRAMMING</a></li>
		</ul>
	</div>
</div>
<div class="widget-categories widget">
	<h4 class="widget__title">Categories</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item">
				<a class="widget__link" href="/categories/c&#43;&#43;/">C&#43;&#43;</a></li>
		</ul>
	</div>
</div>
<div class="widget-taglist widget">
	<h4 class="widget__title">Tags</h4>
	<div class="widget__content">
		<a class="widget-taglist__link widget__link btn" href="/tags/c&#43;&#43;/" title="C&#43;&#43;">C&#43;&#43; (1)</a>
		<a class="widget-taglist__link widget__link btn" href="/tags/threads/" title="Threads">Threads (1)</a>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2022 SLOW-MOTION.
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>